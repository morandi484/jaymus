(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-202d93e5"],{"807c":function(e,t,n){"use strict";n("db80")},"9ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loginIsLoading,expression:"loginIsLoading"}],staticClass:"login-box",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("h2",[e._v("登录")]),n("form",[n("div",{staticClass:"user-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],attrs:{type:"text",name:"",required:""},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}}),n("label",[e._v("手机号")])]),n("div",{staticClass:"user-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",name:"",required:""},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),n("label",[e._v("密码")])])]),n("a",{on:{click:e.sumbit}},[n("span"),n("span"),n("span"),n("span"),e._v(" 登     录 ")])]),n("div",{staticClass:"background-dnc"},e._l(32,(function(t){return n("div",{key:t,staticClass:"item"},[e._v(" MORANDI ")])})),0)])},o=[],s=n("1da1"),a=n("5530"),i=(n("96cf"),n("2f62")),c={components:{},data:function(){return{form:{phone:"",password:""},loginIsLoading:!1}},computed:Object(a["a"])({phoneIs:function(){return!!this.form.phone},passwordIs:function(){return!!this.form.password}},Object(i["c"])("user",["isLogin","userInfo"])),watch:{},methods:Object(a["a"])(Object(a["a"])({},Object(i["d"])("user",["setLoginStatus","setUserInfo"])),{},{sumbit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.phoneIs){t.next=3;break}t.next=20;break;case 3:if(e.passwordIs){t.next=6;break}t.next=20;break;case 6:return e.loginIsLoading=!0,t.prev=7,t.next=10,e.$api.login(e.form.phone,e.form.password);case 10:n=t.sent,window.localStorage.setItem("cookie",n.cookie),window.localStorage.setItem("token",n.token),window.localStorage.setItem("loginStatu",!0),e.getUserInfo(n.profile.userId),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),e.loginIsLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[7,17]])})))()},getUserInfo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$api.getUserDetail(e);case 2:if(r=n.sent,200==r.code){n.next=5;break}return n.abrupt("return",t.$message.error(r.message));case 5:t.loginIsLoading=!1,t.$message.success("登录成功！"),t.setUserInfo(r.profile),t.setLoginStatus(!0),t.$router.push("/");case 10:case"end":return n.stop()}}),n)})))()}}),created:function(){},mounted:function(){}},u=c,d=(n("807c"),n("2877")),p=Object(d["a"])(u,r,o,!1,null,"d2cbf38a",null);t["default"]=p.exports},db80:function(e,t,n){}}]);
//# sourceMappingURL=chunk-202d93e5.2dfcbfc1.js.map